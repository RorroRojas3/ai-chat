<div
  class="offcanvas offcanvas-start menu-offcanvas p-2"
  data-bs-scroll="true"
  tabindex="-1"
  id="menu-offcanvas"
  aria-labelledby="offcanvasWithBothOptionsLabel"
>
  <div
    class="offcanvas-header menu-offcanvas__header menu-offcanvas__header--no-border p-2"
  >
    <h6
      class="offcanvas-title menu-offcanvas__title"
      id="offcanvasWithBothOptionsLabel"
    >
      <img
        src="ai-copihue-icon.svg"
        alt="AI Copihue Icon"
        width="32"
        height="32"
        class="me-2"
      />
    </h6>
    <button
      type="button"
      class="btn-close menu-offcanvas__close-btn"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>
  <div class="offcanvas-body menu-offcanvas__body p-2">
    <ul class="list-group menu-list mb-2">
      <a
        href="javascript:void(0);"
        class="list-group-item list-group-item-action menu-list__item"
        (click)="onClickCreateNewSession()"
        ><i class="bi bi-chat-text"></i>&nbsp;New Chat</a
      >
    </ul>

    <!-- Search functionality -->
    <div class="mb-3">
      <div class="input-group">
        <span class="input-group-text menu-search__icon">
          <i class="bi bi-search"></i>
        </span>
        <input
          type="text"
          class="form-control menu-search__input"
          placeholder="Search chats..."
          [value]="storeService.searchFilter()"
          (input)="onSearchChange($any($event.target).value)"
        />
        @if (storeService.searchFilter()) {
        <button
          class="btn btn-outline-secondary menu-search__clear"
          type="button"
          (click)="clearSearch()"
        >
          <i class="bi bi-x"></i>
        </button>
        }
      </div>
    </div>

    <h6 class="offcanvas-title menu-section-title">Chats</h6>
    <ul class="list-group menu-list">
      @if (storeService.isSearching()) {
      <li class="list-group-item menu-list__item menu-list__item--loading">
        <i class="bi bi-search me-2"></i>
        Searching...
      </li>
      } @else { @for (session of storeService.sessions(); track session) {
      <a
        href="#"
        class="list-group-item list-group-item-action menu-list__item"
        (click)="onClickSession(session.id)"
        >{{
          session.name.length > 40
            ? session.name.slice(0, 40) + "..."
            : session.name
        }}</a
      >
      } @empty { @if (storeService.searchFilter()) {
      <li class="list-group-item menu-list__item menu-list__item--no-results">
        <i class="bi bi-search me-2"></i>
        No chats found for "{{ storeService.searchFilter() }}"
      </li>
      } } }
    </ul>
  </div>
</div>
