<div
  class="d-flex flex-column container"
  style="height: calc(100vh - 56px); width: 100%; overflow: hidden"
>
  <div class="flex-grow-1 d-flex flex-column overflow-hidden px-3">
    <!-- Scrollable conversation area -->
    <div #scrollContainer class="flex-grow-1 overflow-y-auto py-3">
      @for (message of this.storeService.messages(); track message) {
      <app-message-bubble [message]="message"></app-message-bubble>
      }
      <div *ngIf="this.storeService.isStreaming() && this.storeService.disablePromptButton()">
        <app-message-bubble
          [message]="this.storeService.streamMessage()"
        ></app-message-bubble>
      </div>
      <div *ngIf="!this.storeService.isStreaming() && this.storeService.disablePromptButton()" class="d-flex justify-content-start">
        <div class="spinner-border streaming-spinner" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>

    <!-- Sticky prompt box at bottom of chat container -->
    <div class="border-0 py-4">
      <app-prompt-box (markdown)="onMarkdownChange($event)"></app-prompt-box>
    </div>
  </div>
</div>
