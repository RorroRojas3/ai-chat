<div class="sessions-container">
  <div class="container py-4">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8">
        <!-- Header -->
        <div class="mb-4">
          <h2 class="sessions-title">Chat Sessions</h2>
          <p class="sessions-subtitle">Browse and search your chat history</p>
        </div>

        <!-- Search functionality -->
        <div class="mb-4">
          <div class="input-group">
            <span class="input-group-text menu-search__icon">
              <i class="bi bi-search"></i>
            </span>
            <input
              type="text"
              class="form-control menu-search__input"
              placeholder="Search chats..."
              [value]="searchFilter()"
              (input)="onSearchChange($any($event.target).value)"
            />
            @if (searchFilter()) {
            <button
              class="btn btn-outline-secondary menu-search__clear"
              type="button"
              (click)="clearSearch()"
            >
              <i class="bi bi-x"></i>
            </button>
            }
          </div>
        </div>

        <!-- Sessions list -->
        <div class="sessions-list">
          @if (isSearching() && sessions().length === 0) {
          <div class="list-group-item menu-list__item menu-list__item--loading">
            <i class="bi bi-search me-2"></i>
            Searching...
          </div>
          } @else if (sessions().length === 0) { @if (searchFilter()) {
          <div
            class="list-group-item menu-list__item menu-list__item--no-results"
          >
            <i class="bi bi-search me-2"></i>
            No chats found for "{{ searchFilter() }}"
          </div>
          } @else {
          <div
            class="list-group-item menu-list__item menu-list__item--no-results"
          >
            <i class="bi bi-chat-text me-2"></i>
            No chat sessions yet
          </div>
          } } @else {
          <ul class="list-group menu-list">
            @for (session of sessions(); track session.id) {
            <a
              href="javascript:void(0);"
              class="list-group-item list-group-item-action menu-list__item"
              (click)="onClickSession(session.id)"
            >
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">
                  <div class="session-name">
                    {{
                      session.name.length > 60
                        ? session.name.slice(0, 60) + "..."
                        : session.name
                    }}
                  </div>
                  <small class="session-date">
                    Modified: {{ session.localDateModified | date : "short" }}
                  </small>
                </div>
                <i class="bi bi-chevron-right ms-2"></i>
              </div>
            </a>
            }
          </ul>
          }
        </div>

        <!-- Load More Button -->
        @if (sessions().length > 0 && hasMore()) {
        <div class="d-flex justify-content-center mt-4">
          <button
            class="btn btn-load-more"
            (click)="loadMore()"
            [disabled]="isLoadingMore()"
          >
            @if (isLoadingMore()) {
            <span
              class="spinner-border spinner-border-sm me-2"
              role="status"
              aria-hidden="true"
            ></span>
            Loading... } @else {
            <i class="bi bi-arrow-down-circle me-2"></i>
            Load More }
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</div>
