.message-bubble {
  max-width: 75%;
  position: relative;
  margin: 4px 0;

  // Use more width on smaller screens
  @media (max-width: 768px) {
    max-width: 99%;
  }

  @media (max-width: 480px) {
    max-width: 99%;
  }
}

.message-content {
  margin-bottom: 4px;
  word-wrap: break-word;
}

.message-user {
  background-color: var(--color-accent);
  color: white;
}

.message-assistant {
  color: var(--color-accent);

  // Add padding for copy button at bottom of non-outgoing messages
  padding-bottom: 2.5rem !important;

  @media (max-width: 576px) {
    padding-bottom: 2rem !important;
  }
}

// Copy message button styling
.message-copy-btn {
  opacity: 0.7;
  transition: opacity 0.2s ease, background-color 0.2s ease,
    border-color 0.2s ease;
  background-color: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(28, 60, 98, 0.2);
  color: var(--color-accent);
  padding: 0.25rem 0.5rem;
  z-index: 1;

  &:hover {
    opacity: 1;
    background-color: white;
    border-color: var(--color-accent);
    color: var(--color-navy);
  }

  &:focus {
    opacity: 1;
    box-shadow: 0 0 0 0.2rem rgba(28, 60, 98, 0.25);
  }

  &.copied {
    opacity: 1;
    background-color: #d4edda;
    border-color: #28a745;
    color: #28a745;
  }

  i {
    font-size: 0.875rem;

    @media (max-width: 576px) {
      font-size: 0.75rem;
    }
  }
}

// Code block wrapper and copy button (using :host for dynamically created elements)
:host {
  .code-block-wrapper {
    position: relative;

    pre {
      margin-bottom: 0;
      padding-right: 3rem;

      @media (max-width: 576px) {
        padding-right: 2.5rem;
        font-size: 0.75rem;
      }
    }
  }

  .code-copy-btn {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0.5rem;
    opacity: 0.7;
    transition: opacity 0.2s ease, background-color 0.2s ease;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(28, 60, 98, 0.2);
    color: var(--color-accent);
    padding: 0.25rem 0.5rem;
    z-index: 2;
    font-size: 0.75rem;
    border-radius: 0.25rem;
    cursor: pointer;

    &:hover {
      opacity: 1;
      background-color: white;
      border-color: var(--color-accent);
      color: var(--color-navy);
    }

    &:focus {
      opacity: 1;
      box-shadow: 0 0 0 0.2rem rgba(28, 60, 98, 0.25);
    }

    &.copied {
      opacity: 1;
      background-color: #d4edda;
      border-color: #28a745;
      color: #28a745;
    }

    i {
      font-size: 0.75rem;

      @media (max-width: 576px) {
        font-size: 0.625rem;
      }
    }
  }
}
